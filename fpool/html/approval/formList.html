<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../layui/css/layui.css" />
		<script type="text/javascript" src="../../layui/layui.js"></script>
	</head>
	<body>
		<table class="layui-table" id="table" lay-filter="table">


			<script type="text/html" id="toolbarDemo">
				<div class="layui-btn-container">
					<button class="layui-btn layui-btn-sm" lay-event="deleteAll">删除</button>
		  		</div>
		  	</script>		
			<!-- <button class="layui-btn layui-btn-sm" lay-event="add">新增</button> -->
			<script type="text/html" id="barDemo">
				<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i class="layui-icon layui-icon-delete"></i>删除</a>
				{{#  if(d.id == 1){ }}
						<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="fire" style="background-color: #5FB878;"><i class="layui-icon layui-icon-circle"></i>已推广</a>
				{{#  }  
				else { }}
					<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="fire" ><i class="layui-icon layui-icon-fire"></i>推广学习</a>
				{{#  } }}			
			</script>
				<script type="text/html" id="xuhao">
			   		{{d.LAY_TABLE_INDEX+1}}
				</script>
	</body>


</html>
<script type="text/javascript">
	layui.use(['table', "laypage", "element", "laydate"], function() {
		var table = layui.table,
			form = layui.form,
			$ = layui.jquery,
			element = layui.element,
			laypage = layui.laypage,
			laydate = layui.laydate;
		var genUrl = "127.0.0.1:8080/"
		var contextPath = "approval/";
		var currPageUrl = "form/";

		render()

		function render() {
			table.render({
				elem: '#table',
				url: "http://127.0.0.1:8080/approval/form/getLists",
					// ,toolbar: '#toolbarDemo'
				/* parseData: function(res){ //res 即为原始返回的数据
						var obj = eval("("+res+")");
					    return {
					      "code": obj.code, //解析接口状态
					      "msg": obj.msg, //解析提示文本
					      "count": obj.count, //解析数据长度
					      "data": obj.data //解析数据列表
					    };
				}, */
				page: true,
				cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
					/* ,where:{
						depId:search
					} */
					,
				cols: [
					[{
						type: "checkbox"
					}, {
						title: '序号',
						width: 80,
						templet: '#xuhao'
					}, {
						field: 'formName',
						title: '名字'
					}, {
						fixed: 'right',
						title: '操作',
						toolbar: '#barDemo',
						width: 180
					}]
				],
				parseData: function(res) {

				},
				request: {
					pageName: 'page' //页码的参数名称，默认：page
						,
					limitName: 'limit' //每页数据量的参数名，默认：limit
				},
				//完成回调
				done: function(res, curr1) {

					/* //设置table以外元素
			 	    	 form.on('switch(isBand)', function(data){
			 	    	 console.log(data);
			             	  $.post(contextPath+currPageUrl+"enterMem/setBand",{"isBand":data.elem.checked?1:0,"id":$(data.elem).attr("_id"),"enterId":enterId},function(rt){
			             		  
			             		  if(rt.code==200){
			             			  layer.msg("修改成功");
			             			  table.render({ elem: '#test'})
			             		  }else{
			             			  layer.msg(rt.msg);
			             		  }
			             	  },"json");
			             	  
			             });   */


				}
			});

		}


	})
</script>
